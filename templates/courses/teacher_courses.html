{% extends 'base.html' %}

{% block title %}<title>My Courses - SkillUp</title>{% endblock %}

{% block hero %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h3 class="fw-bold">My Courses</h3>
    <p class="text-muted small">Manage your published courses, add lessons, and track student progress.</p>
  </div>
  <div class="d-flex gap-2">
    <a href="{% url 'course-create' %}" class="btn btn-primary nav-cta">Create New Course</a>
    <a href="/courses/" class="btn btn-outline-secondary">Browse Site</a>
  </div>
</div>

{% if courses.exists %}
<div class="row g-4">
  {% for c in courses %}
  <div class="col-md-6 col-lg-4 animate-fade-in-up stagger-{{ forloop.counter }}">
    <div class="card hover-card h-100">
      <div style="position:relative; height:220px; overflow:hidden;">
        {% if c.image %}
        <img src="{{ c.image.url }}" class="card-img-top" style="height:100%; object-fit:cover; width:100%" />
        {% else %}
        <div style="height:100%; background:#f1f5f9; display:flex; align-items:center; justify-content:center;">No image</div>
        {% endif %}
        <div style="position:absolute; top:12px; left:12px; background:rgba(0,0,0,0.6); color:#fff; padding:6px 10px; border-radius:999px; font-size:13px;">{{ c.rate }} â˜…</div>
      </div>

      <div class="card-body d-flex flex-column">
        <h5 class="card-title mb-1">{{ c.name }}</h5>
        <p class="text-muted mb-3 truncate-3">{{ c.bio|default:'No description provided.' }}</p>

        <div class="d-flex justify-content-between align-items-center mt-auto">
          <div class="d-flex align-items-center gap-3">
            <small class="text-muted">{{ c.lessons.count|default:0 }} lessons</small>
            <small class="text-muted">{{ c.students.count|default:0 }} students</small>
          </div>

          <div class="d-flex gap-2">
            <a href="{% url 'lessons' c.pk %}" class="btn btn-sm btn-outline-primary">Lessons</a>
            <div class="dropdown">
              <button class="btn btn-sm btn-primary dropdown-toggle" type="button" id="courseActions{{ c.pk }}" data-bs-toggle="dropdown" aria-expanded="false">Manage</button>
              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="courseActions{{ c.pk }}">
                <li><a class="dropdown-item" href="{% url 'add-lesson' c.pk %}">Add Lesson</a></li>
                <li><a class="dropdown-item" href="{% url 'update-course' c.pk %}">Edit Course</a></li>
                <li><a class="dropdown-item text-danger" href="{% url 'delete-course' c.pk %}">Delete Course</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="card p-4 text-center">
  <h5 class="fw-bold">You have no courses yet</h5>
  <p class="text-muted">Create your first course to start teaching students.</p>
  <a href="{% url 'course-create' %}" class="btn btn-primary">Create Course</a>
</div>
{% endif %}

{% endblock %}
